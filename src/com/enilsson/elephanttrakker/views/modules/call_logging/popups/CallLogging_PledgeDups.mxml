<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="450" height="275">
	
	<mx:Script>
		<![CDATA[
			import com.enilsson.elephanttrakker.events.modules.call_logging.PledgeWorkspaceEvent;
			import com.enilsson.elephanttrakker.models.ETModelLocator;
			import com.enilsson.elephanttrakker.views.modules.call_logging.renderers.*;
			import com.enilsson.graphics.enDropShadows;
			
			[Bindable] private var _model:ETModelLocator = ETModelLocator.getInstance();
			
			private function processPledge():void
			{
				_model.call_logging.showDupBox = false;
				new PledgeWorkspaceEvent ( PledgeWorkspaceEvent.DO_TRANSACTION ).dispatch();
			}			
		]]>
	</mx:Script>
	
	<mx:Canvas styleName="popupContent"
		filters="{[com.enilsson.graphics.enDropShadows.standardDS()]}"
		width="100%" height="{height - 15}"
		top="15">
		
		<mx:VBox top="30" right="15"
			width="{width - 30}" height="{height - 55}">			
			<mx:Text width="100%" fontSize="10" 
				text="The pledge you have entered is similar to the following previously entered pledges. Please confirm that your pledge is not a duplicate of the following previously entered pledges."
				/>			
			<mx:List id="dupsList"
				styleName="dupsList"
				width="100%" height="100%"
				variableRowHeight="true"
				dataProvider="{_model.call_logging.pledgeDups}" 
				itemRenderer="{new ClassFactory(PledgeDups_Item)}" />
			<mx:HBox horizontalAlign="center" verticalAlign="middle" width="100%">
				<mx:LinkButton styleName="choiceBtn"
					label="process pledge with entered details" 
					toolTip="Continue process"
					click="processPledge()" 
					 />
				<mx:Button styleName="choiceBtnProceed" height="28"
					label="accept pledge is a duplicate" 
					click="_model.call_logging.reset(); _model.call_logging.showDupBox = false;"
					toolTip="Accept this pledge as a duplicate and clear the form"
					 />		
			</mx:HBox>
		</mx:VBox>
	
	</mx:Canvas>	
	
	<mx:Image source="{_model.icons.pledge}" 
		filters="{[com.enilsson.graphics.enDropShadows.standardDS()]}"
		top="0" left="5" />
	<mx:Text text="Duplicate pledges found" color="#FFFFFF" fontSize="18" fontWeight="bold" top="15" left="45" />
		
</mx:Canvas>