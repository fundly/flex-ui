<?xml version="1.0" encoding="utf-8"?>
<common:FluidPanel xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:common="com.enilsson.elephantadmin.views.common.*"
	xmlns:components="com.enilsson.elephantadmin.views.modules.app_options.view.components.*" 
	xmlns:option_views="com.enilsson.elephantadmin.views.modules.app_options.view.option_views.*"
	styleName="panel" 
	layout="absolute"
	title="{_pm.editorTitle}">
	
	<mx:ViewStack width="100%" height="100%"
		selectedIndex="{selectedIndex}">
		<option_views:Options_AgentsAgreement pm="{_pm}" />
		<option_views:Options_PrivacyStatement pm="{_pm}" />
		<option_views:Options_WorkplaceAgreement pm="{_pm}" />
		<option_views:Options_PledgeSuccess pm="{_pm}" />
		<option_views:Options_PledgeSuccessCheck pm="{_pm}" />
		<option_views:Options_RSSFeed pm="{_pm}" />
		<option_views:Options_Legalese pm="{_pm}" />
		<option_views:Options_PaidFor pm="{_pm}" />
		<option_views:Options_DownlineRequest pm="{_pm}" />
		<option_views:Options_ContactsRequest pm="{_pm}" />
	</mx:ViewStack>
	
<!--	
	<mx:VBox id="container" width="100%" height="100%"
		paddingLeft="15" paddingRight="15" paddingTop="15" paddingBottom="40">
		
		<mx:Text id="descriptionText" 
			width="100%"
			fontSize="14"
			text="{_pm.editingSiteOption.description}" 
			selectable="false" />
					
		<mx:FormItem label="Show this content in BlueSwarm:">
			<mx:CheckBox id="displayCb" 
				selected="{_pm.displayOption}" 
				change="_pm.changeOption('display', displayCb.selected)"/>	
		</mx:FormItem>
			
		<components:SiteOptionsRTE id="valueText"
			width="100%" height="100%"
			htmlText="{_pm.editingSiteOption.value}"
			change="_pm.changeOption('value', valueText.htmlText)"
			variables="{siteOption.variables}" />		
	</mx:VBox>
-->

	<common:ModuleControlBar id="moduleControlBar" 
		width="100%" horizontalAlign="left">
		<mx:HBox width="100%" height="100%" 
			horizontalAlign="center" verticalAlign="middle" >
			<common:CMSSubmitBtn label="SAVE" 
				click="_pm.save()" 
				enabled="{_pm.changed}" />
			<common:CMSSubmitBtn label="CANCEL" 
				click="_pm.cancel()" 
				enabled="{_pm.changed}" />
		</mx:HBox>		
	</common:ModuleControlBar>

<!--	
	<common:states>
		<mx:State name="{SiteOption.WORKSPACE_AGREEMENT}">
			<mx:RemoveChild target="{valueText}" />
			<mx:AddChild relativeTo="{container}" position="lastChild">
				<components:WorkspaceAgreementEditor id="waEditor"
					width="100%" height="100%"
					xmlString="{_pm.editingSiteOption.value}"
					change="_pm.changeOption('value', waEditor.xmlString);" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{moduleControlBar}" position="firstChild">
				<components:VariableSelector includeInLayout="false"/>
			</mx:AddChild>
		</mx:State>
	</common:states>
-->
	
	
	<mx:Binding source="this.siteOption" destination="siteOption" />
		
	<mx:Script>
		<![CDATA[
			import com.enilsson.elephantadmin.views.modules.app_options.model.SiteOption;
			import com.enilsson.elephantadmin.views.modules.app_options.model.pm.OptionsEditorPM;
			
			[Bindable] public function get selectedIndex():int { return _selectedIndex; }
			private var _selectedIndex:int = 0;
			public function set selectedIndex( value:int ) : void { _selectedIndex = value; }
			
			[Bindable] public function get siteOption() : SiteOption { return _pm.siteOption; }
			public function set siteOption( value : SiteOption ) : void { _pm.siteOption = value; }
			
			public function set pm( value : OptionsEditorPM ) : void { _pm = value; } 
			[Bindable] private var _pm : OptionsEditorPM;
			
/* 			override public function set currentState(value:String):void
			{
				if(!_pm.changed)
				{
					switch(value)
					{
						case SiteOption.WORKSPACE_AGREEMENT:
							super.currentState = value;
						break;
						default:
							super.currentState = "";
						break;
					}
				}
			} */
		]]>
	</mx:Script>
	
	<mx:Style>
		.formRTE {
			fontSize: 10;
			verticalGap: 5;
			borderAlpha:0;
			dropShadowEnabled:false;
			borderThicknessLeft:0;
			borderThicknessRight:2;
			borderThicknessBottom:0;	
			color:#333333;	
			fontFamily: appFont;
			textAreaStyleName: rteInput;
		}
		.rteInput {
			fontSize: 12;
			fontColor: #333333;
			inputWidth: 250;
			paddingTop: 3;
			paddingBottom: 1;
			paddingLeft: 5;
			paddingRight: 5;
			borderStyle: solid;
			borderColor: #999999;
			backgroundColor: #F4F4F4;
			dropShadowEnabled: false;	
		}		
	</mx:Style>
			
</common:FluidPanel>
